---
layout: post
title: Docker 실습
summary: 열심히 기록하자!
author: Lee Chang Ho
date: '2021-02-22 14:49:00'
category: 프로젝트
published: true
image:  docker/docker.png
tags:   Git GitLab SourceTree
---

## Docker 실습을 해보자

---
#### Docker란?
---
###### 도커(Docker)란 `리눅스 컨테이너`를 기반으로 하여 특정한 서비스를 패키징하고 배포하는데 유용한 오픈소스 프로그램이다.
###### 좀 더 자세한 내용은 다음에 공부를 더 해서 정리를 해보도록 하자
###### 오늘은 Docker를 이용해 이전에 만든 장고 프레임워크 프로젝트를 이미지로 생성하고  생성한 이미지를 이용해 컨테이너를 생성하고 컨테이너 삭제 등을 해보겠습니다.

---
#### Docker 명령어
---
###### 이미지 생성
```bash
docker build <옵션> <Dockerfile 경로>
```  
###### 이미지 실행
```bash
docker run (<옵션>) <이미지 식별자> (<명령어>) (<인자>)
```  
###### 이미지 중지
```bash
docker stop <이미지명>
```  
###### 이미지 확인
```bash
docker image ls
```  
###### 이미지 삭제
```bash
docker rmi <이미지명>
docker rmi -f <이미지명> # -f 옵션을 붙이면 컨테이너도 강제로 삭제
```  
###### 동작중인 컨테이너 확인
```bash
docker ps
```  
###### 중지된 컨테이너 확인
```bash
docker ps -a
```  
###### 컨테이너 시작
```bash
docker start <컨테이너ID>
```  
###### 컨테이너 중지
```bash
docker stop <컨테이너ID>
```  
###### 컨테이너 삭제
```bash
docker rm <컨테이너ID>
```  

---
#### DockerFile 생성 
---
###### docker로 이미지를 만들기 위해서는 DockerFile을 먼저 만들어야 한다. 도커는 기본적으로 이미지가 있어야 컨테이너를 생성하고 동작시킬 수 있다. dockerfile은 필요한 최소한의 패키지를 설치하고 동작하기 위한 자신만의 설정을 담은 파일이고, 이 파일로 이미지를 생성(빌드)하게 된다.
```bash
FROM python

RUN apt-get update \
    && apt-get install -y --no-install-recommends \
            postgresql-client \
	        && rm -rf /var/lib/apt/lists/*

WORKDIR /usr/src/app
COPY requirements.txt ./
RUN pip --trusted-host pypi.org --trusted-host pypi.python.org --trusted-host files.pythonhosted.org install -r requirements.txt
COPY . .

EXPOSE 8000
CMD ["python", "manage.py", "runserver", "0.0.0.0:8000"]
```
###### 그리고 해당 위치에서 아래 명령어를 실행해 주자. freeze 명령어는 설치된 패키지를 requirements 포맷으로 출력해준다.
```bash
pip freeze > requirements.txt
```

<!--stackedit_data:
eyJoaXN0b3J5IjpbMTUyNzc0MjA3NCwtMTE1NDQ1MjgzMiwtMT
I2MzE1NzUxNSwtOTEwNzc4NTAwLC0yOTU5NjY0MzAsLTEzMTYy
ODk1MTldfQ==
-->